!function(){let e=[];const t="https://develop.datacrm.la/anieto/anietopruebatecnica/webservice.php";document.querySelector(".button-consulta").addEventListener("click",(function(n){fetch(t+"?operation=getchallenge&username=prueba",{method:"GET",redirect:"follow"}).then(e=>e.json()).then(n=>{!async function(n){const o=new FormData;o.append("token",n);try{const n="/api/encriptar",a=await fetch(n,{method:"POST",body:o}),c=await a.json();if(c){let n=new URLSearchParams;n.append("operation","login"),n.append("username","prueba"),n.append("accessKey",c),fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n,redirect:"follow"}).then(e=>e.json()).then(n=>{fetch(`${t}?operation=query&sessionName=${n.result.sessionName}&query=select * from Contacts;`,{method:"GET",redirect:"follow"}).then(e=>e.json()).then(t=>{e=t.result,function(){!function(){const e=document.querySelector("#listado-informacion");for(;e.firstChild;)e.removeChild(e.firstChild)}();const t=document.querySelector("#listado-informacion"),n=document.createElement("TABLE");n.classList.add("tabla");const o=document.createElement("THEAD");o.classList.add("encabezado");const a=document.createElement("TBODY");a.classList.add("cuerpo");const c=document.createElement("TR");c.classList.add("filaEncabezado");const d=document.createElement("TH");d.textContent="ID";const i=document.createElement("TH");i.textContent="CONTACT_NO";const r=document.createElement("TH");r.textContent="LASTNAME";const l=document.createElement("TH");l.textContent="CREATEDTIME",c.appendChild(d),c.appendChild(i),c.appendChild(r),c.appendChild(l),o.appendChild(c),e.forEach(e=>{const{id:t,contact_no:n,lastname:o,createdtime:c}=e,d=document.createElement("TR");d.dataset.id=t,d.classList.add("fila");const i=document.createElement("TD");i.textContent=t;const r=document.createElement("TD");r.textContent=n;const l=document.createElement("TD");l.textContent=o;const s=document.createElement("TD");s.textContent=c,d.appendChild(i),d.appendChild(r),d.appendChild(l),d.appendChild(s),a.appendChild(d)}),n.appendChild(o),n.appendChild(a),t.appendChild(n)}()})})}}catch(e){Swal.fire({icon:"error",title:"Error",text:"No pudimos realizar tu solicitud, intenta nuevamente mÃ¡s tarde."})}}(n.result.token)})})),limpiarCampos.addEventListener("click",e=>{vaciarCampos()})}();